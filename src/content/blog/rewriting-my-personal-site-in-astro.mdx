---
title: Why I Rewrote My Personal Site in Astro
description: I've been wanting to do a rewrite of my personal site for a while now. This is a summary of why I replaced NextJS with Astro, some of the main features that attracted me, a few unexpected delights, and some minor downsides I uncovered.
pubDate: 12-22-2024
heroImage:
  [
    ../../assets/images/blog/rewriting-my-personal-site-in-astro/hero.jpg,
    "A person working on a laptop with a website or blog featuring a modern, clean design visible on the screen.",
  ]
heroImageCredit: [ChatGPT, ""]
isDraft: true
---

If you've visited my site in the past, you'll likely find that--at least visually--it looks mostly unchanged. But under the hood, basically everything has changed. That's because I recently decided to rewrite the previous version, built with NextJS, with a new version built with [Astro](https://astro.build/).

In this post, I'll talk about why I settled on Astro, some of the main features I like, a few unexpected delights, and some of the, mostly minor, downsides I discovered.

## Deciding on replacing NextJS

This all started with me reviewing the current codebase and running [npm-check-updates](https://www.npmjs.com/package/npm-check-updates) in my code repo, only to be greeted by a sea of red.

![Sea of Red pic](https://placehold.co/600x300?text=sea+of+red)

As I started digging to into what specifically was outdated, the old version of NextJS (v12) really stood out. I briefly looked into updating to the latest version (v15), but with the current app using the [old page router model](https://nextjs.org/docs/pages), just that process alone of updating the new [app router](https://nextjs.org/docs/app) seemed like a lot. But more significantly, the entire framework just started to feel bloated and basically overkill for a mostly static site with a blog.

In my opinion, NextJS has effectively turned into the Wordpress of React apps. It has a massive userbase, but boy does it feel old and clunky.

[MAKE CURRENT CODE PUBLIC AND REFERENCE?]

So it was time to shop around for a more light-weight modern alternative.

**TODO: add callout box: "NextJS just felt like overkill for a mostly static site with a blog."**

## Why I settled on Astro

Picking a new JS framework is a bit like when you go to a classic diner and are presented with a seemingly endless menu.

![huge diner menu pic - NEED TO ADD CAPTION WITH CREDIT](https://placehold.co/600x400?text=huge+diner+menu)

With [so many available options](https://cssauthor.com/javascript-frameworks/), it's important to have a clear understanding of what you want.

These are the features that were most important to me:

- Optimized for static, content-rich sites, but can also support more advanced functionality if needed.
- Supports [mdx](https://mdxjs.com/) content out of the box.
- Has a large and growing community of users.

I considered a number of options, including [Svelte](https://svelte.dev/), [Qwik](https://qwik.dev/), and[Htmx](https://htmx.org/), each of which I recommend checking out, but in the end, I decided to go with [Astro](https://astro.build/), which checks all of the above boxes and much more.

Here are a few of the main reasons why, as well as some challenges I encountered.

## MDX and other "batteries" included

(All my current blog posts are written in mdx.)
With my old version of the app, quite a bit was required to get MDX working, including installing and configuring [next-mdx-remote](https://www.npmjs.com/package/next-mdx-remote), and multiple other packages such as [gray-matter](https://www.npmjs.com/package/gray-matter), to allow for reading in mdx files and frontmatter, handling code syntax highlighting and more. If I had stuck with the new version of Next, there would still be [quite a bit of config](https://nextjs.org/docs/pages/building-your-application/configuring/mdx) required.

With Astro, just run `npx astro add mdx`, follow the prompts, and you're good to go. This is thanks to their numerous [automatic integration setups](https://docs.astro.build/en/guides/integrations-guide/) for their official integrations, which includes mdx.

So much of what I had previously needed to set up manually just worked out of the box, including handling of [frontmatter](https://wiki.dendron.so/notes/ffec2853-c0e0-4165-a368-339db12c8e4b/), code syntax highlighting, and more.

(As an aside, I can't understand why NextJS doesn't add these types of wizard-like features, but that's a topic for another day.)

## Bringing markdown lightness to component files

I remember the first time I encountered markdown. Coming from years of working with HTML, I just took one look at it and it immediately made sense.

In many ways, the Astro component file structure applies markdown thinking to component files, which means a lot less code to write to achieve the same result.

As an example, here is a code comparison of (a simplified version) of my original NextJS homepage code vs the Astro equivalent.

```jsx
import { Layout, PostsList, WelcomeHero } from "~/components";
import { getAllPosts } from "~/lib";
import { PostSummaryData } from "~/models";
import { AdditionalPosts } from "./blog";

interface Props {
  posts: PostSummaryData[];
}

export const getStaticProps = () => {
  return {
    props: {
      posts: getAllPosts(),
    },
  };
};

export default function Home({ posts }: Props) {
  return (
    <Layout
      metaDescription="Anders Ramsay's personal site, where he writes about designing and building digital products."
    >
      <WelcomeHero />
      <div className="mt-10 md:mt-6">
        <PostsList
          posts={posts}
          title="Recent Posts"
        />
      </div>
    </Layout>
  );
}
```

(32 lines of code)
(Put all this in citation blocks: The above is a fairly vanilla NextJS React server component, meaning we are able to combing code that runs on the server (`getStaticProps` with code that runs on both client and server.)

```jsx
---
import Hero from "~/components/Hero/Hero.astro";
import List from "~/components/List.astro";
import Layout from "~/layouts/Layout.astro";
import { getAllPosts } from "~/lib";

const posts = await getAllPosts();
---

<Layout
  description="Anders Ramsay's personal site, where he writes about designing and building digital products."
>
  <div class="mt-10">
    <Hero />
  </div>
  <section class="mt-10 md:mt-[32px]">
      <h2 class="text-center md:text-left">Recent Posts</h2>
      <List items={posts} />
  </section>
</Layout>
```

(20 lines of code)
Here is the same functionality in Astro. All the code that runs strictly on the server is enclosed in the equivalent of a markdown frontmatter block. Everything below that block runs both on the client and server. Note also that there is no need to include a function export or name your component.

And we cut the number of lines of code by about a third.

Note that everything except for the jsx is optional. For a minimal component, the difference becomes even more pronoounced.

```jsx
interface Props {
  children: React.ReactElement;
}

export function CalloutBox({ children }: Props) {
  return (
    <div
      className={
        "bg-slate-100 md:rounded-md pt-3 md:pt-2 p-2 prose-headings:mt-2"
      }
    >
      {children}
    </div>
  );
}
```

And the equivalent Astro code:

```jsx
<div class={"bg-slate-100 md:rounded-md pt-3 md:pt-2 p-2 prose-headings:mt-2"}>
  <slot />
</div>
```

In this case, we went from 15 to 3 lines of code. :tada:

Note how it's not even necessary to name your component within the file as it's just a default export and you can name it whatever you want when importing, though I'd strongly recommend having that name match the name of the file. (This can also lead to some headaches. More on that below.)

## I assumed I'd still need React, but apparently not

As I mentioned earlier, one of my requirements for the selected framework was to allow for continuing to use tools I already know, such as React. I just assumed I'd need it for more advanced features.

Well, as it turned out, I was happily surprised to not have to add React, at least so far.

Time and again, I would start porting over some feature, and it would turn out no React was needed.

(CALLOUT) The general pattern, I found, is that you can usually just replace some react-specific package with a more generic or framework-agnostic equivalent. (And this is not something necessarily specific to Astro, but a general trend among newer frameworks.)

For example, I was using [react icons](https://react-icons.github.io/react-icons/) for display of icons. In that, I was able to quite easily replace it with [iconify](https://iconify.design/).

And the best part is that if I should encounter a feature for which I can't find a good generic version, well, adding React is always an option.

While I am definitely overall happy with making the switch, there were definitely a few areas of frustration.

## One component per file

With Astro, you can only have one component per file. In many cases, I've found it preferable to be able to organize tightly related component parts into smaller sub-components, but with Astro that meant I had to place all those in a folder, create a file for each sub-component and then import into the main component. To be honest, having multiple components in single file is probably not a good practice, so I guess in some ways this was Astro forcing me to eat my broccoli.

## Mysterious linting errors

One oddity of Astro I encountered were some mysterious errors I'd see when importing what appears to be a native Astro module.

![Sea of Red pic](https://placehold.co/600x300?text=sync+error)

As it happens that error message isn't quite accurate. Running astro dev is not sufficient, and even restarting your language server didn't always help. Instead, when I see these errors I run the [`astro sync`](https://docs.astro.build/en/reference/cli-reference/#astro-sync) command, which re-generates types for content schemas and more. Apparently, [I was not the only one](https://github.com/withastro/astro/issues/5711) who was confused about this. Even though the issue is closed on Github, I was still experiencing it as of this writing.

## Several other nits, but overall a great DX

I could continue to list a number of additional issues I encountered, but they were in most cases minor. Overall, I'm quite happy with having made the switch to Astro. Last but not least, there was one more little delighter I forgot to mention. When adding any of the official [Astro integrations], they come with a nice automated setup CLI. Just follow the prompts and voila :tada:

If you're thinking of standing up or replacing your mostly static site, definitely research all the current available options out there (and before doing so, save yourself some headache and list your specific requirements), but definitely take a look at Astro as well.
